<!-- ============================================================================
 🗂️ Module: 3XSyncHub.UI.AutoUpdate.xaml
 🔖 Version: 20251119_1210
 📌 Nội dung đã xử lý:
   - Form cấu hình AutoUpdate chuẩn 3XVN.UI (2 cột: Config 400px + Log)
   - Đồng bộ layout: tiêu đề trung tâm, spacing 10px, baseline đúng
   - Các trường HIS / EMR + interval + tooltip
   - Bộ nút hệ thống chuẩn (Lưu – Bắt đầu – Dừng, màu sắc 3XVN)
   - LogView chiều cao 800px, border + ScrollViewer đúng chuẩn form hệ thống
 ============================================================================ -->

<Page x:Class="_3XSyncHub.Views.AutoUpdate"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Title="Cấu hình AutoUpdate"
      Loaded="Page_Loaded">

    <Grid Margin="30">
        <!-- ========== CẤU TRÚC LƯỚI CHÍNH ========== -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ========== TIÊU ĐỀ 2 CỘT ========== -->
        <TextBlock Text="⚙️ Cấu hình tác vụ tự động"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="#111111"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   Grid.Row="0" Grid.Column="0"
                   Margin="0,0,0,10"/>

        <TextBlock Text="📝 Nhật ký hoạt động"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="#111111"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   Grid.Row="0" Grid.Column="1"
                   Margin="0,0,0,10"/>

        <!-- ========== CỘT TRÁI: CẤU HÌNH ========== -->
        <StackPanel Grid.Row="1" Grid.Column="0" VerticalAlignment="Top">
            <!-- HIS Update Stock -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,10">
                <CheckBox x:Name="chkHISUpdateStock"
                          Content="Cập nhật số lượng khả dụng = tồn kho, khi khả dụng > tồn kho"
                          FontSize="14"
                          Width="300"
                          VerticalAlignment="Center"/>
                <TextBox x:Name="txtHISInterval"
                         MinWidth="0"
                         Width="40"
                         Padding="0"
                         VerticalContentAlignment="Center"
                         HorizontalContentAlignment="Center"
                         Margin="8,0,0,0"
                         ToolTip="Số phút giữa các lần cập nhật"/>
                <TextBlock Text="phút"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="5,0,0,0"/>
            </StackPanel>

            <!-- EMR Update Document -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,15">
                <CheckBox x:Name="chkEMRUpdateDocument"
                          Content="Gửi lại văn bản sang EMR (5 ngày gần nhất)"
                          FontSize="14"
                          Width="300"
                          VerticalAlignment="Center" Checked="chkEMRUpdateDocument_Checked"/>
                <TextBox x:Name="txtEMRInterval"
                         MinWidth="0"
                         Width="40"
                         Padding="0"
                         VerticalContentAlignment="Center"
                         HorizontalContentAlignment="Center"
                         Margin="8,0,0,0"
                         ToolTip="Số phút giữa các lần gửi"/>
                <TextBlock Text="phút"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="5,0,0,0"/>
            </StackPanel>

            <!-- ========== NÚT CHỨC NĂNG ========== -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="0,20,0,0">
                <Button x:Name="btnSave"
                        Content="💾 Lưu"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="BtnSave_Click"/>
                <Button x:Name="btnStart"
                        Content="▶ Bắt đầu"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="BtnStart_Click"/>
                <Button x:Name="btnStop"
                        Content="⏹ Dừng"
                        Style="{StaticResource DangerButtonStyle}"
                        IsEnabled="False"
                        Click="BtnStop_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- ========== CỘT PHẢI: LOG ========== -->
        <StackPanel Grid.Row="1" Grid.Column="1" VerticalAlignment="Top">
            <Border BorderThickness="1" BorderBrush="#DDD" CornerRadius="8">
                <ScrollViewer Height="800" VerticalScrollBarVisibility="Auto">
                    <ListBox x:Name="lstLog"
                             ItemsSource="{Binding Logs}"
                             Background="#FAFAFA"
                             BorderThickness="0"
                             Padding="5"
                             HorizontalContentAlignment="Left"
                             VerticalContentAlignment="Top">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Message}"
                                           Foreground="{Binding Color}"
                                           FontSize="13"
                                           Margin="0,2,0,2"
                                           TextWrapping="Wrap"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </ScrollViewer>
            </Border>
        </StackPanel>
    </Grid>
</Page>
